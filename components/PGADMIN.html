<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" />

    <meta name="generator" content="sphinx-5.0.2, furo 2022.06.04.1"/>
        <title>PGAdmin - AusCAT documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=40978830699223671f4072448e654b5958f38b89" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">AusCAT  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">AusCAT  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../installation.html">Simulation Environment Installation</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../host.html">Host Machine Setup</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../simulation/LOCAL_MACHINE.html">Local Machine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../simulation/NECTAR.html">NECTAR Virtual Machine Setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../simulation/DOCKER_PORTAINER.html">Docker &amp; Portainer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../simulation/SIMULATION.html">Simulation Environment Deployment</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../examples.html">Examples</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../simulation/METRICS.html">Metric Computation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../simulation/FEDERATED_ANALYSIS.html">Federated Analysis Example</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Components</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="IMAGING.html">Imaging</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="dicom.html">DICOM</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="ORTHANC.html">Orthanc</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For Developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../guidelines/CODING.html">AusCAT Coding Guidelines</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="pgadmin">
<h1>PGAdmin<a class="headerlink" href="#pgadmin" title="Permalink to this heading">#</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">#</a></h2>
<p><a class="reference external" href="https://www.pgadmin.org/">PGAdmin</a> is a web-based Graphical User Interface (GUI) tool that can be used to interact with Postgres databases. It allows for viewing and inspecting what structure and data is contained within them. Using the in-built account management system, the tool can be configured to only grant access to users who have the required ethics permissions to access the database.</p>
<p>This tool is great for the following scenarios:</p>
<ul class="simple">
<li><p>To get a quick grasp of what AusCAT data is available at your centre</p></li>
<li><p>Run quick queries/SQL reports on your AusCAT data</p></li>
<li><p>Quickly interact with the database in the case of development or testing, eg.:</p>
<ul>
<li><p>Purging/flushing or quickly restructuring the databases</p></li>
<li><p>Entering dummy data</p></li>
<li><p>Integrating new features using the simulation environment databases</p></li>
</ul>
</li>
</ul>
<p>This component requires the AusCAT databases (KeyDB and CatDB) to be deployed along with it, in order to operate correctly by default. More information on the configuration of PGAdmin can be in the next section.</p>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading">#</a></h2>
<p>Typically, our Docker components are deployed efficiently using a docker-compose file. To further simplify setting up user accounts and server connections within the tool, we have built a custom Docker image for PGAdmin which handles these things, allowing the user to access the tool with a default admin user who can further modify user access and server connection setups.</p>
<p>A template docker-compose service for PGAdmin in AusCAT is as follows:</p>
<div class="highlight-yml notranslate"><div class="highlight"><pre><span></span>   pgadmin:
      restart: always
      image: &#39;auscat/pgadmin4&#39;
      ports: 
         - 5050:80
      environment:
         PGADMIN_DEFAULT_EMAIL: john.smith@org.com
         PGADMIN_DEFAULT_PASSWORD: a_hopefully_complex_password
</pre></div>
</div>
<p>In this example, we have set the tool to run on port 5050 on the host machine, and can be accessed via the web broswer (eg. http://localhost:5050), however it can be deployed on any available port. Please confirm that the chosen port is available for use and edit accordingly in the yml configuration.</p>
<p>The 2 environment variables “PGADMIN_DEFAULT_EMAIL” and “PGADMIN_DEFAULT_PASSWORD” are used to allow a default admin user access to the tool.</p>
<p>The Docker image <code class="docutils literal notranslate"><span class="pre">auscat/pgadmin4</span></code> is built using predefined configuration files, these are:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/AustralianCancerDataNetwork/auscat_installation/blob/main/pgadmin/servers.json">servers.json</a>: this provides PGAdmin in the Docker image with the appropriate connection strings to connect to the local KeyDB and CatDB databases deployed in the Docker stack. If you would like to define your own JSON file for more specific “out-of-the-box” configuration, you can follow the section below.</p></li>
<li><p><a class="reference external" href="https://github.com/AustralianCancerDataNetwork/auscat_installation/blob/main/pgadmin/pgpass">pgpass</a>: This defines some placeholder user logins to access the databases in PGAdmin. These are overwritten by secrets created in Portainer. Information on the secrets can be found in the below section.</p></li>
</ul>
</section>
<section id="secrets">
<h2>Secrets<a class="headerlink" href="#secrets" title="Permalink to this heading">#</a></h2>
<p>By default, the image requires 4 secrets to be set in Portainer for the logging access to work, these are:</p>
<ul class="simple">
<li><p>keydb_user: The username for the KeyDB database server</p></li>
<li><p>keydb_pass: The password for the KeyDB database server username indicated above</p></li>
<li><p>catdb_user: The username for the CatDB database server</p></li>
<li><p>catdb_pass: The password for the CatDB database server username indicated above</p></li>
</ul>
<p>Once these have been set, you are ready to deploy the service, either in isolation or together with the other AusCAT components.</p>
</section>
<section id="docker-image">
<h2>Docker Image<a class="headerlink" href="#docker-image" title="Permalink to this heading">#</a></h2>
<p>We currently maintain the <code class="docutils literal notranslate"><span class="pre">auscat/pgadmin4</span></code> image on our AusCAT Dockerhub account for PGAdmin use in our stack, with the tag <code class="docutils literal notranslate"><span class="pre">latest</span></code> being the most up-to-date version.</p>
<p>It is built on top of the <a class="reference external" href="https://hub.docker.com/r/dpage/pgadmin4/">offical PGAdmin image</a> developed by dpage.</p>
<p>The Dockerfile can be found <a class="reference external" href="https://github.com/AustralianCancerDataNetwork/auscat_installation/blob/main/pgadmin/Dockerfile">here</a>.</p>
<p>Similar to the other AusCAT Docker components and if you are using Portainer to deploy these components, upgrading the PGAdmin service is a straightforward process.</p>
<ol class="arabic simple">
<li><p>Access the “Services” page in Portainer</p></li>
<li><p>Select the checkbox of the relevant PGAdmin service, on the left hand side of the table containing the services.</p></li>
<li><p>Click on “Deploy” and a popup will appear on the screen. Toggle the “Pull latest image” option and then click deploy.</p></li>
</ol>
<p>This should take a few seconds to redeploy the container with the latest image.</p>
</section>
<section id="contributions">
<h2>Contributions<a class="headerlink" href="#contributions" title="Permalink to this heading">#</a></h2>
<p>The following is a guide on how to build your own version of the PGAdmin tool for use in AusCAT:</p>
<ol class="arabic">
<li><p>The <code class="docutils literal notranslate"><span class="pre">servers.json</span></code> file can be modified for your own use case, here is a description of what the options for each server is used for:</p>
<ul class="simple">
<li><p>Name: Name of the database to connect to in PGAdmin. This is merely a descriptive name for your benefit.</p></li>
<li><p>Group: The entity under which this database should be stored for PGAdmin’s inner workings. This should always be set to “Servers”.</p></li>
<li><p>Port: The port on which the database server is running on the “Host” you are trying to connect to. By default, this is 5432 as we use the Docker service hostname (either “keydb_server” or “catdb_server”) and this port is (nearly) always used for hosting the postgres servers on. Depending on your stack deployment, please modify accordingly.</p></li>
<li><p>Host: This is the hostname where the database server is running on. Again, by default this is set to either “keydb_server” or “catdb_server” but can also point to other hostnames depedning on your setup or potentially if the postgres servers run on a different VM/machines than PGAdmin.</p></li>
<li><p>Username: the username to access the database server. We have defaults set for the CatDB (“catdb_user”), but again depending on how you configure your CatDB this will most likely change, and may be of benefit to change this as well.</p></li>
<li><p>PassFile: the path to the file that will contain credentials to connect to the database. The default option is “/pgpass”. We suggest to keep this option the same as the default, but to change the pgpass file that will be copied into the image when rebuilding it.</p></li>
<li><p>Comment: A description of what this connection is. This can be set to what you consider helpful to identify this connection in PGAdmin.</p></li>
</ul>
<p>The remaining options can be left as default:</p>
<ul class="simple">
<li><p>MaintenanceDB: “postgres”</p></li>
<li><p>Timeout: 60</p></li>
<li><p>UseSSHTunnel: 0</p></li>
<li><p>TunnelPort: 22</p></li>
<li><p>SSLMode: “prefer”</p></li>
<li><p>TunnelAuthentication: 0</p></li>
<li><p>KerberosAuthentication: false</p></li>
</ul>
</li>
<li><p>To integrate the <code class="docutils literal notranslate"><span class="pre">server.json</span></code> and <code class="docutils literal notranslate"><span class="pre">pgpass</span></code> files with the Docker building process, a <a class="reference external" href="https://github.com/AustralianCancerDataNetwork/auscat_installation/blob/main/pgadmin/custom_entrypoint.sh">custom entrypoint file</a> is used. This injects the new connection strings and dynamic Portainer credential secrets into the PGAdmin config files. If further customisation is required to config files, they should be dealt with in a similar custom entrypoint file.</p></li>
<li><p>To build the new Docker image, you can use the command <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">build</span> <span class="pre">-t</span> <span class="pre">auscat/pgadmin4:your-tag</span></code>, where <code class="docutils literal notranslate"><span class="pre">your-tag</span></code> is your specific tag of the image.</p></li>
<li><p>(Recommended) Once the image has been built, attempt to test it out in the simulation environment setting with some public data in both the KeyDB and CatDB.</p></li>
<li><p>(Optional) If you wish to share these images with the broader AusCAT, we recommend that you clone the <code class="docutils literal notranslate"><span class="pre">auscat_installation</span></code> repository, create a new local branch and commit/push your new changes to this branch. Finally, create a Pull Request (PR) into the “main” branch with appropriate details on what has been added/changed.</p></li>
</ol>
<p>Once a member of the AusCAT technical team has reviewed the PR and indicated approval, a push to the AusCAT Dockerhub account may occur for others to use.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Ingham Medical Physics
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">PGAdmin</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#secrets">Secrets</a></li>
<li><a class="reference internal" href="#docker-image">Docker Image</a></li>
<li><a class="reference internal" href="#contributions">Contributions</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>